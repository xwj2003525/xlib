# x:time

---

## 设计理念
1. 接口简洁语义清晰
2. 运算和视图分离
3. 高效便捷

## 组件介绍

StampView←Stamp⇔Gap→GapView

### Stamp&Gap

```
Stamp:顾名思义为时间戳(精确到毫秒)，用于表示某个时刻的类，例如2024年11月18日的23:35:21:999(精确到毫秒)
Gap:表示时间差表示两个时间戳的间隔(精确到毫秒)，有非负性，例如a时刻与b时刻的时间差总等于b时刻与a时刻的时间差
```

```
Stamp-Stamp=Gap : 表示两个时间戳之间的间隔，交换两个时间戳Gap仍不变，理解为两个时刻间隔多少时间

Stamp±Gap=Stamp : 表示某个时间戳过去或未来Gap个时间单位的时间戳，理解为某个时刻之前或之后多少时间是那个时刻

Gap+Gap=Gap     : 表示多个时间间隔相加，理解为两个时段相加是多长时间
```
### 可表示范围
```
Stamp和Gap底层都是uint64_t表示毫秒，不过Stamp适用范围应限定在21世纪，即2000年1月1日0时0分0秒000毫秒到2999年12月31日23时59分59秒999毫秒，Gap最大间隔为上述两个时刻的差，当然uint64_t可表示的时间范围更长，但并无必要，由此可省去大量的边界判断。

```


### StampView&GapView

Stamp和Gap只需要一个uint64_t即可存储内容,但是用户需要的更多

```
StampView用于存储Stamp中具体年月日时分秒毫秒信息。以及toString

GapView用于存储Gap表示的多少天+多少小时+多少分+多少秒+多少毫秒,以及toString
```

StampView可参与构造Stamp，而GapView无需参与构造Gap，因为有更清晰的工厂可获取需要的Gap

## assert错误

1. 构造Stamp时，需要保证日期真实存在，考虑润年因素
2. 进行构造或运算时，需要保证构造或运算后的Stamp和Gap仍处于可用范围
